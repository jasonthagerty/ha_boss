name: zwave_device_offline
version: 1
description: "Healing plan for Z-Wave devices that go offline or become unavailable"
enabled: true
priority: 50

match:
  integration_domains:
    - "zwave_js"
    - "ozw"
  failure_types:
    - "unavailable"
    - "unknown"

steps:
  - name: "retry_service_call"
    level: "entity"
    action: "retry_service_call"
    params:
      max_attempts: 2
      base_delay_seconds: 2.0
    timeout_seconds: 15

  - name: "reconnect_device"
    level: "device"
    action: "reconnect"
    params:
      wait_after_seconds: 5.0
    timeout_seconds: 30

  - name: "reload_integration"
    level: "integration"
    action: "reload_integration"
    params:
      wait_after_seconds: 10.0
    timeout_seconds: 45

on_failure:
  escalate: true
  cooldown_seconds: 900

tags:
  - "zwave"
  - "connectivity"
