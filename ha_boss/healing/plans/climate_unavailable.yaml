name: climate_unavailable
version: 1
description: "Healing plan for climate entities (thermostats, HVAC) that become unavailable"
enabled: true
priority: 45

match:
  entity_patterns:
    - "climate.*"
  failure_types:
    - "unavailable"

steps:
  - name: "retry_service_call"
    level: "entity"
    action: "retry_service_call"
    params:
      max_attempts: 2
      base_delay_seconds: 2.0
    timeout_seconds: 15

  - name: "reconnect_device"
    level: "device"
    action: "reconnect"
    params:
      wait_after_seconds: 5.0
    timeout_seconds: 25

  - name: "reload_integration"
    level: "integration"
    action: "reload_integration"
    params:
      wait_after_seconds: 10.0
    timeout_seconds: 45

on_failure:
  escalate: true
  cooldown_seconds: 600

tags:
  - "climate"
  - "hvac"
